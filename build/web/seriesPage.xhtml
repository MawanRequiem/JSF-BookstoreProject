<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/style.css" />
    <style>
        body, html {
            font-family: 'Zen Maru Gothic', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #FFFFEF;
        }
        
        /* Book container styling */
        .book-details-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            padding: 20px;
            gap: 20px;
        }

        .book-detail {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            width: 220px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .book-detail:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        .book-detail img {
            width: 140px;
            height: 200px;
            object-fit: cover;
            margin-bottom: 10px;
        }
    </style>
    <title>Books in Series</title>
</head>

<h:body>
    <h:form>
        <h2>Books in Series: #{param.series}</h2>
        
        <!-- Panel grid with 4 columns -->
        <h:panelGrid columns="4" styleClass="book-details-container">
            <ui:repeat value="#{bukuBean.getBooksBySeries(param.series)}" var="book">
                <div class="book-detail">
                    <!-- Book image -->
                    <h:graphicImage value="data:image/jpeg;base64,#{bukuBean.convertToBase64(book.gambarBuku)}"
                                    alt="#{book.namaBuku}" style="width: 100%; height: 200px; object-fit: cover;"/>
                    <!-- Book info -->
                    <h3>#{book.namaBuku}</h3>
                    <p>Genre: #{book.genreBuku}</p>
                    <p>Stock: #{book.stockBuku} items</p>
                    <h4>Price: Rp #{book.hargaBuku}</h4>
                    
                    <!-- View details link -->
                    <h:commandLink value="View Details" action="#{viewBookBean.loadBuku(book.idBuku)}"
                                   onclick="window.location.href='bookDetails.xhtml?idBuku=#{book.idBuku}'; return false;"/>
                </div>
            </ui:repeat>
        </h:panelGrid>
    </h:form>
</h:body>

</html>
